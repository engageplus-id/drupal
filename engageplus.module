<?php

/**
 * @file
 * Primary module hooks for EngagePlus module.
 */

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function engageplus_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.engageplus':
      $output = '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('The EngagePlus module provides lightweight OAuth authentication that syncs users directly to your Drupal database.') . '</p>';
      $output .= '<h3>' . t('Getting Started') . '</h3>';
      $output .= '<ol>';
      $output .= '<li>' . t('Create an account at <a href="@url" target="_blank">EngagePlus</a>', ['@url' => 'https://engageplus.id']) . '</li>';
      $output .= '<li>' . t('Configure your OAuth providers (Google, GitHub, Microsoft, LinkedIn) in the EngagePlus dashboard') . '</li>';
      $output .= '<li>' . t('Copy your Client ID from the dashboard') . '</li>';
      $output .= '<li>' . t('Configure the module at <a href="@config">EngagePlus settings</a>', ['@config' => '/admin/config/people/engageplus']) . '</li>';
      $output .= '<li>' . t('Add the EngagePlus widget block to any region on your site') . '</li>';
      $output .= '<li>' . t('Add your Drupal site URL as a redirect URI in the EngagePlus dashboard') . '</li>';
      $output .= '</ol>';
      $output .= '<h3>' . t('Features') . '</h3>';
      $output .= '<ul>';
      $output .= '<li>' . t('3-line integration with drop-in OAuth widget') . '</li>';
      $output .= '<li>' . t('Automatic user creation and login') . '</li>';
      $output .= '<li>' . t('Support for multiple OAuth providers') . '</li>';
      $output .= '<li>' . t('Customizable widget appearance') . '</li>';
      $output .= '<li>' . t('Flexible block placement') . '</li>';
      $output .= '</ul>';
      return $output;
  }
}

/**
 * Implements hook_theme().
 */
function engageplus_theme($existing, $type, $theme, $path) {
  return [
    'engageplus_widget' => [
      'variables' => [
        'container_id' => NULL,
        'client_id' => NULL,
        'config' => [],
      ],
    ],
  ];
}

